<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">

<style>

.pano {
	margin: 0 -1em;
  height: calc(100vw*3/4);
  background-color: #ccc;
  overflow: hidden;
  position: relative;
  background-repeat: repeat-x;
  background-size: auto 300%;
  background-position: 50% 50%;
}

</style>

</head>
<body>

<div id="pano" class="pano" style="background-image: url('images/pool.jpg');">
</div>
<p>16</p>
<p>Alpha value: <span id="x"></span></p>
<p>Normalized value: <span id="mA"></span></p>
<p>Background position: <span id="bg"></span></p>
	
<script>

	// this is all device orientation

  /*
  var pano = document.getElementById('pano');
  function handleOrientation(event) {
    var mfix      = event.alpha;
    var mA        = event.alpha  / 3.60;
    var mB        = event.beta / 3.60;
    var mG        = event.gamma / 3.60;
    pano.style.backgroundPosition =
    ((mA + 50) * -1) + '% ' + '50%';
    var bg = pano.style.backgroundPosition;
    document.getElementById('x').innerHTML = mfix;
    document.getElementById('mA').innerHTML = mA;
    document.getElementById('bg').innerHTML = bg;
  }
  window.addEventListener('deviceorientation', handleOrientation);*/

  var pano = document.getElementById('pano');
  function handleOrientation(event) {
    var mfix      = event.alpha;
    var mA        = event.alpha  / 3.60;
    var mB        = event.beta / 3.60;
    var mG        = event.gamma / 3.60;
    var i         = 0

    var oldA:int = 0;
    var NewA:int = 0;

    function loop():void
    {
        // Change the number.
        now = changingNumber;

        if(newA > oldA)
        {
            pano.style.backgroundPosition =
            ((i + 1 * Math.PI ) * -1) + '% ' + '50%';
        }
        else if(newA < oldA)
        {
            pano.style.backgroundPosition =
            ((i - 1 * Math.PI ) * -1) + '% ' + '50%';
        }
        else
        {
            pano.style.backgroundPosition =
            ((i) * -1) + '% ' + '50%';
        }

        // Store the changed value for comparison on new loop() call.
        // Notice how we do this AFTER 'now' has changed and we've compared it.
        thn = now;
    }
    var bg = pano.style.backgroundPosition;
    document.getElementById('x').innerHTML = mfix;
    document.getElementById('mA').innerHTML = mA;
    document.getElementById('bg').innerHTML = bg;
  }
  window.addEventListener('deviceorientation', handleOrientation);

  // ugh



</script>

</body>
</html>